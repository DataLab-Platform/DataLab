#!/bin/bash

set -euo pipefail

cp -r binder/Desktop ${HOME}/Desktop
chmod +x ${HOME}/Desktop/*.desktop

export DATALAB_DIR=$(dirname $(python -c "import datalab; print(datalab.__file__)"))

echo "export XDG_RUNTIME_DIR=${HOME}/.config/" >> ${HOME}/.bashrc
echo "export DATALAB_DIR=${DATALAB_DIR}" >> ${HOME}/.bashrc

cp ${DATALAB_DIR}/data/logo/DataLab.svg ${HOME}

ln -s ${DATALAB_DIR}/data/tests ${HOME}/Desktop/test_data

# Customize Xfce settings
mkdir -p ${HOME}/.config/xfce4/xfconf/xfce-perchannel-xml
cp binder/xsettings.xml ${HOME}/.config/xfce4/xfconf/xfce-perchannel-xml/
cp binder/xfce4-panel.xml ${HOME}/.config/xfce4/xfconf/xfce-perchannel-xml/
cp binder/xfce4-desktop.xml ${HOME}/.config/xfce4/xfconf/xfce-perchannel-xml/

# For nbgitpuller
jupyter server extension enable --py nbgitpuller --sys-prefix
